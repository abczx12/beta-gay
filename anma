-- Load Rayfield UI (Thay YOUR_RAYFIELD_URL b·∫±ng link Rayfield UI ho·∫°t ƒë·ªông b·∫°n t√¨m ƒë∆∞·ª£c)
local success, Rayfield = pcall(function()
    return loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
end)
if not success then
    warn("Kh√¥ng th·ªÉ t·∫£i Rayfield UI. Vui l√≤ng ki·ªÉm tra URL ho·∫∑c k·∫øt n·ªëi internet.")
    return
end

-- Khai b√°o bi·∫øn
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local rootPart = character:WaitForChild("HumanoidRootPart")
local fastAttackEnabled = false
local autoFruitEnabled = false
local fastAttackThread

-- T·∫°o Window Rayfield
local Window = Rayfield:CreateWindow({
    Name = "Beta Hubüí∏",
    LoadingTitle = "ƒêang t·∫£i...",
    LoadingSubtitle = "Your mom",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "BetaHubConfig",
        FileName = "BetaHub"
    },
    Discord = {
        Enabled = false,
        Invite = "discord.gg/123456789",
        RememberJoins = true
    },
    KeySystem = false,
    KeySettings = {
        Title = "Beta Hub Key",
        Subtitle = "Nh·∫≠p kh√≥a ƒë·ªÉ ti·∫øp t·ª•c",
        Note = "Li√™n h·ªá admin ƒë·ªÉ l·∫•y kh√≥a",
        FileName = "BetaHubKey",
        SaveKey = true,
        GrabKeyFromSite = false,
        Key = {"Hello"}
    }
})

-- T·∫°o Tab trong Rayfield
local MainTab = Window:CreateTab("Ch√≠nh", 4483345998)
local CustomizeTab = Window:CreateTab("T√πy Ch·ªânh", 4483345998)

-- Section cho Controls
local MainSection = MainTab:CreateSection("T√≠nh NƒÉng")

-- H√†m c·∫≠p nh·∫≠t nh√¢n v·∫≠t
local function updateCharacter()
    character = player.Character or player.CharacterAdded:Wait()
    humanoid = character:WaitForChild("Humanoid")
    rootPart = character:WaitForChild("HumanoidRootPart")
end
player.CharacterAdded:Connect(updateCharacter)

-- H√†m Fast Attack (T·ªëc ƒë·ªô t·ªëi ∆∞u cho mobile: 0.001s)
local function startFastAttack()
    print("B·∫Øt ƒë·∫ßu Fast Attack (t·ªëi ∆∞u mobile)...")
    if fastAttackThread then
        task.cancel(fastAttackThread)
        fastAttackThread = nil
    end
    
    local tool = character:FindFirstChildOfClass("Tool")
    if not tool then
        print("Kh√¥ng t√¨m th·∫•y c√¥ng c·ª•! Vui l√≤ng trang b·ªã c√¥ng c·ª• ƒë·ªÉ s·ª≠ d·ª•ng Fast Attack.")
        fastAttackEnabled = false
        Rayfield:Notify({
            Title = "L·ªói",
            Content = "Kh√¥ng c√≥ c√¥ng c·ª• n√†o ƒë∆∞·ª£c trang b·ªã! Vui l√≤ng trang b·ªã c√¥ng c·ª• ƒë·ªÉ s·ª≠ d·ª•ng Fast Attack.",
            Duration = 5,
            Image = 4483345998
        })
        return
    end

    fastAttackThread = task.spawn(function()
        print("Lu·ªìng Fast Attack ƒë√£ kh·ªüi ƒë·ªông")
        while fastAttackEnabled and character and humanoid.Health > 0 do
            local currentTool = character:FindFirstChildOfClass("Tool")
            if currentTool then
                currentTool:Activate()
                print("K√≠ch ho·∫°t c√¥ng c·ª•")
            else
                print("C√¥ng c·ª• b·ªã th√°o, d·ª´ng Fast Attack")
                fastAttackEnabled = false
                break
            end
            task.wait(0.001) -- T·ªëc ƒë·ªô t·ªëi ∆∞u cho mobile, tr√°nh lag
        end
    end)
end

local function stopFastAttack()
    if fastAttackThread then
        task.cancel(fastAttackThread)
        fastAttackThread = nil
    end
end

-- H√†m Auto Fruit (TƒÉng wait ƒë·ªÉ t·ªëi ∆∞u mobile)
local function autoFruit()
    print("B·∫Øt ƒë·∫ßu Auto Fruit...")
    local debounce = false
    while autoFruitEnabled do
        if not debounce then
            debounce = true
            for _, fruit in pairs(game.Workspace:GetChildren()) do
                local grabTool = fruit:FindFirstChild("ProximityPrompt") or fruit:FindFirstChild("GrabTool")
                local touchGrabTool = fruit:FindFirstChild("TouchInterest") or fruit.Name:lower():find("fruit") or fruit.Name:lower():find("devilfruit")
                
                if (grabTool or touchGrabTool) and fruit:IsA("BasePart") then
                    print("T√¨m th·∫•y tr√°i c√¢y t·∫°i v·ªã tr√≠:", fruit.Position)
                    local fruitPos = fruit.Position
                    rootPart.CFrame = CFrame.new(fruitPos + Vector3.new(0, 5, 0))
                    wait(1) -- TƒÉng wait ƒë·ªÉ gi·∫£m t·∫£i mobile
                    
                    if grabTool and grabTool:IsA("ProximityPrompt") then
                        print("K√≠ch ho·∫°t ProximityPrompt cho tr√°i c√¢y")
                        fireproximityprompt(grabTool)
                    elseif grabTool and grabTool:IsA("ClickDetector") then
                        print("K√≠ch ho·∫°t ClickDetector cho tr√°i c√¢y")
                        fireclickdetector(grabTool)
                    end
                end
            end
            debounce = false
        end
        wait(2) -- TƒÉng wait gi·ªØa c√°c l·∫ßn qu√©t ƒë·ªÉ gi·∫£m t·∫£i
    end
end

-- Th√™m Toggle cho Fast Attack
MainSection:CreateToggle({
    Name = "Fast Attack",
    CurrentValue = false,
    Flag = "FastAttackToggle",
    Callback = function(Value)
        print("Fast Attack ƒë√£ ƒë∆∞·ª£c b·∫≠t/t·∫Øt:", Value)
        fastAttackEnabled = Value
        if fastAttackEnabled then
            updateCharacter()
            startFastAttack()
        else
            stopFastAttack()
        end
    end
})

-- Th√™m Toggle cho Auto Fruit
MainSection:CreateToggle({
    Name = "Auto Fruit",
    CurrentValue = false,
    Flag = "AutoFruitToggle",
    Callback = function(Value)
        print("Auto Fruit ƒë√£ ƒë∆∞·ª£c b·∫≠t/t·∫Øt:", Value)
        autoFruitEnabled = Value
        if autoFruitEnabled then
            task.spawn(autoFruit)
        end
    end
})

-- Section cho T√πy Ch·ªânh
local CustomizeSection = CustomizeTab:CreateSection("T√πy Ch·ªânh Giao Di·ªán")

-- Th√™m ColorPicker cho M√†u N·ªÅn
CustomizeSection:CreateColorPicker({
    Name = "M√†u N·ªÅn Hub",
    Color = Color3.fromRGB(40, 40, 40),
    Flag = "BackgroundColor",
    Callback = function(Value)
        Window:SetBackgroundColor3(Value)
    end
})

-- Th√™m ColorPicker cho M√†u Ch·ªØ
CustomizeSection:CreateColorPicker({
    Name = "M√†u Ch·ªØ Hub",
    Color = Color3.fromRGB(255, 255, 255),
    Flag = "TextColor",
    Callback = function(Value)
        Window:SetTextColor3(Value)
    end
})

-- Ki·ªÉm tra thay ƒë·ªïi c√¥ng c·ª•
player.Backpack.ChildAdded:Connect(function(child)
    if child:IsA("Tool") and fastAttackEnabled then
        wait(0.1)
        startFastAttack()
    end
end)

character.ChildRemoved:Connect(function(child)
    if child:IsA("Tool") and fastAttackEnabled then
        stopFastAttack()
        fastAttackEnabled = false
    end
end)

-- Kh·ªüi t·∫°o Rayfield UI
Rayfield:LoadConfiguration()
